module 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_withdraw {
    struct WithdrawEvent has copy, drop {
        vault_id: 0x2::object::ID,
        vt_amount: u64,
        withdrawn_amount: u64,
        total_deposited: u64,
        total_borrowed: u64,
        total_vt_supply: u64,
    }

    fun get_withdraw_params<T0, T1, T2, T3>(arg0: &0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::Vault<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>, arg1: &0xf95b06141ed4a174f239417323bde3f209b972f5930d8521ea38a52aff3a6ddf::lending_market::LendingMarket<T3>, arg2: u64) : (u64, u64, u64) {
        (0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::utils::safe_mul_div(arg2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::borrowed<T0, T1, T3>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::protocol_config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0), arg1), 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::config::total_vt_supply<T0, T1, T2>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0)) - 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::config::seed_vt_amount<T0, T1, T2>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0))), 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::utils::safe_mul_div(arg2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::deposited<T0, T1, T3>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::protocol_config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0), arg1), 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::config::total_vt_supply<T0, T1, T2>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0))), 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::utils::safe_mul_div(arg2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::deposited_ctoken_amount<T0, T1, T3>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::protocol_config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0), arg1), 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::config::total_vt_supply<T0, T1, T2>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0))))
    }

    public fun get_withdraw_receipt<T0, T1, T2, T3>(arg0: &0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::Vault<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>, arg1: &0xf95b06141ed4a174f239417323bde3f209b972f5930d8521ea38a52aff3a6ddf::lending_market::LendingMarket<T3>, arg2: 0x2::balance::Balance<T2>, arg3: &0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Acl, arg4: &0x8139c475c58f2ec95163b91d41d9969729b75176b166d53c9ee415acff32449a::acl::AggregatorAcl, arg5: &0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::version::Version, arg6: &mut 0x2::tx_context::TxContext) : 0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::PermissionedReceipt {
        0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::version::assert_current_version(arg5);
        assert!(0x2::balance::value<T2>(&arg2) > 0, 2);
        let (v0, _, _) = get_withdraw_params<T0, T1, T2, T3>(arg0, arg1, 0x2::balance::value<T2>(&arg2));
        let v3 = 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::protocol_config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0);
        assert!(*0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::get_extra_info<T0, T1, T3, vector<u8>, bool>(v3, b"is_spring_vault"), 1);
        let v4 = 0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::issue<0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::access(arg3), 0x1::option::some<0x2::object::ID>(0x8139c475c58f2ec95163b91d41d9969729b75176b166d53c9ee415acff32449a::acl::access_id(arg4)), arg6);
        0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::add_data<vector<u8>, 0x2::balance::Balance<T2>, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(&mut v4, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::access(arg3), b"vt_balance", arg2);
        0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::add_data<vector<u8>, u64, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(&mut v4, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::access(arg3), b"loan_amount", v0);
        0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::add_data<vector<u8>, 0x1::type_name::TypeName, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(&mut v4, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::access(arg3), b"loan_type", 0x1::type_name::get<T1>());
        0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::add_data<vector<u8>, 0x2::object::ID, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(&mut v4, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::access(arg3), b"pool_id", *0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::get_extra_info<T0, T1, T3, vector<u8>, 0x2::object::ID>(v3, b"pool_id"));
        0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::add_data<vector<u8>, 0x2::object::ID, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(&mut v4, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::access(arg3), b"vault_id", 0x2::object::id<0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::Vault<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>>(arg0));
        v4
    }

    public fun process_withdraw_receipt<T0, T1, T2, T3>(arg0: &mut 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::Vault<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>, arg1: &mut 0xf95b06141ed4a174f239417323bde3f209b972f5930d8521ea38a52aff3a6ddf::lending_market::LendingMarket<T3>, arg2: &mut 0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::PermissionedReceipt, arg3: &0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Acl, arg4: &0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::version::Version, arg5: &0x2::clock::Clock, arg6: &mut 0x2::tx_context::TxContext) : 0x2::balance::Balance<T0> {
        0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::version::assert_current_version(arg4);
        let v0 = 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::access(arg3);
        assert!(0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::remove_data<vector<u8>, 0x2::object::ID, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(arg2, v0, b"vault_id") == 0x2::object::id<0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::Vault<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>>(arg0), 1);
        let v1 = 0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::remove_data<vector<u8>, 0x2::balance::Balance<T2>, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(arg2, v0, b"vt_balance");
        let v2 = 0x2::balance::value<T2>(&v1);
        0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::repay<T0, T1, T3>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::protocol_config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0), 0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::remove_data<vector<u8>, 0x2::balance::Balance<T1>, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(arg2, v0, b"funds"), arg1, arg5, arg6);
        let (_, _, v5) = get_withdraw_params<T0, T1, T2, T3>(arg0, arg1, v2);
        let v6 = 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::withdraw<T0, T1, T3>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::protocol_config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0), v5, arg1, arg5, arg6);
        0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::config::burn_vt<T0, T1, T2>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::config_mut<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0), 0x2::coin::from_balance<T2>(v1, arg6));
        0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::add_data<vector<u8>, 0x2::balance::Balance<T0>, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(arg2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::access(arg3), b"funds", 0x2::balance::split<T0>(&mut v6, 0xfe579a58d32d38e154a8c0d4aa646238851f340258d10c7482cef9bea165b823::receipt::remove_data<vector<u8>, u64, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::acl::Access>(arg2, v0, b"repay_amount")));
        assert!(0x2::balance::value<T0>(&v6) > 0, 1);
        let v7 = WithdrawEvent{
            vault_id         : 0x2::object::id<0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::Vault<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>>(arg0),
            vt_amount        : v2,
            withdrawn_amount : 0x2::balance::value<T0>(&v6),
            total_deposited  : 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::deposited<T0, T1, T3>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::protocol_config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0), arg1),
            total_borrowed   : 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::borrowed<T0, T1, T3>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::protocol_config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0), arg1),
            total_vt_supply  : 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::config::total_vt_supply<T0, T1, T2>(0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::vault::config<T0, T1, T2, 0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::suilend_config::SuilendConfig<T0, T1, T3>>(arg0)),
        };
        0xaf7a312f6c3119d361732ae7a154f799841289c46623839c94c9987de1053558::event::emit<WithdrawEvent>(v7);
        v6
    }

    // decompiled from Move bytecode v6
}

